

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta charset="utf-8" />
    <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>
      How to use the framework | Business Process Optimization  documentation
    </title>
      <link rel="stylesheet" href="_static/pygments.css" />
      <link rel="stylesheet" href="_static/theme.css" />
        <link rel="search" title="Search" href="search.html"/>
        <link rel="index" title="Index" href="genindex.html"/>
        <link
          rel="next"
          title="API Documentation"
          href="api.html"
        />
        <link
          rel="prev"
          title="Business Process Optimization"
          href="index.html"
        />
  </head><body class="text-gray-900 antialiased">
    <div id="page" class="h-screen md:grid md:grid-layout">
      <a
  class="block text-xl bg-white px-8 py-4 z-20 absolute top-0 inset-x-0 text-center transform
  -translate-y-full focus:translate-y-0 focus:outline-none transition-transform duration-75"
  href="#how-to-use-the-framework"
  title="Skip navigation links"
  >Skip to content</a>

      <header class="grid-area-header z-10">
        <div class="bg-gray-900 shadow-md flex justify-between items-center z-10">
      <a class=" hover:bg-gray-700 focus:bg-gray-700 tooltipped tooltipped-se"
   href="index.html"
   aria-label="Back to homepage">
  
<h2 class="text-xl text-gray-100 mx-5 py-4">Business Process Optimization  documentation</h2>
</a>
    <form
    id="searchbox"
    action="search.html"
    method="get"
    class="hidden md:flex my-auto mx-5 justify-between items-center print:hidden">

    <input
      name="q"
      id="search-input"
      type="search"
      aria-label="Search the docs"
      placeholder="Search the docs"
      class="p-2 flex-1 focus:bg-yellow-50 rounded-none"
      style="width: 300px;"
    />
    
<button class="p-2 text-white bg-gray-700 hover:bg-gray-200 hover:text-pink-500 focus:bg-gray-200 focus:text-pink-500 tooltipped tooltipped-sw"
        aria-label="Get search results">
  <svg aria-hidden="true" class="fill-current stroke-current h-6 w-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
</button>

  </form>
</div>
      </header><aside id="sidebar" class="grid-area-sidebar h-full fixed md:relative inset-y-0 left-0 z-20 md:z-0 print:hidden overflow-y-auto transition-all transform transform-gpu -translate-x-full opacity-0 duration-300 md:translate-x-0 md:opacity-100">
          <nav
  role="navigation"
  class="h-full overflow-y-auto bg-white text-gray-700 border-r pt-16 flex flex-col"
>
  <div class="nav-toc flex-1 px-5"><p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">How to use the framework</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#quick-start">Quick start</a></li>
<li class="toctree-l2"><a class="reference internal" href="#defining-a-problem">Defining a problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="#defining-a-planner">Defining a planner</a></li>
<li class="toctree-l2"><a class="reference internal" href="#defining-a-predicter">Defining a predicter</a></li>
<li class="toctree-l2"><a class="reference internal" href="#visualizing-the-results">Visualizing the results</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="bpo.planners.html">bpo.planners module</a></li>
<li class="toctree-l2"><a class="reference internal" href="bpo.predicters.html">bpo.predicters module</a></li>
<li class="toctree-l2"><a class="reference internal" href="bpo.problems.html">bpo.problems module</a></li>
<li class="toctree-l2"><a class="reference internal" href="bpo.simulator.html">bpo.simulator module</a></li>
<li class="toctree-l2"><a class="reference internal" href="bpo.visualizers.html">bpo.visualizers module</a></li>
</ul>
</li>
</ul>
</div>
<button
    id="closeSidebar"
    aria-label="Close menu"
    title="Close menu"
    class="text-4xl text-gray-800 p-4 bottom-0 hover:text-pink-500 md:hidden focus:text-pink-500 self-center">
  <svg aria-hidden="true" class="fill-current stroke-current h-6 w-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
</button>

</nav>
        </aside>

      <main class="px-5 lg:ml-fluid grid-area-main overflow-y-auto flex flex-col h-full "><nav role="navigation"
     aria-label="breadcrumbs"
     class="mt-16 mb-12 text-sm text-gray-700 leading-tight print:hidden">
  <a class="text-blue-700" href="index.html">Business Process Optimization  documentation</a>
  <span class="text-gray-700 mr-1">/</span><span aria-current="page">How to use the framework</span>
</nav>
        <article role="main" class="flex-1">
          
  <section id="how-to-use-the-framework">
<h1>How to use the framework<a role="button" class="headerlink tooltipped tooltipped-ne" href="#how-to-use-the-framework" aria-label="Copy link to section: How to use the framework."><svg xmlns="http://www.w3.org/2000/svg" pointer-events="none" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h1>
<p>The Business Process Optimization framework can be used to simulate an operational business process in combination
with a particular technique for forecasting and a particular technique for planning. The results of different
variants (of the process, forecasting technique or planning technique) can be compared and visualized.</p>
<p>To optimize a business process, three elements must be specified:</p>
<ul class="simple">
<li><p>the business process itself, using a problem description.</p></li>
<li><p>a planner that decides which resource to assign to which task at what moment in time, possibly based on predictions.</p></li>
<li><p>optionally, a predicter that either forecasts when cases will arrive to the process, or predicts how long a task in the process will take, or both.</p></li>
</ul>
<p>The planner and predicter can be freely defined, but some default planners and predicters also exist.</p>
<div class="contents local topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#quick-start" id="id1">Quick start</a></p></li>
<li><p><a class="reference internal" href="#defining-a-problem" id="id2">Defining a problem</a></p></li>
<li><p><a class="reference internal" href="#defining-a-planner" id="id3">Defining a planner</a></p></li>
<li><p><a class="reference internal" href="#defining-a-predicter" id="id4">Defining a predicter</a></p></li>
<li><p><a class="reference internal" href="#visualizing-the-results" id="id5">Visualizing the results</a></p></li>
</ul>
</div>
<section id="quick-start">
<h2><a class="toc-backref" href="#id1">Quick start</a><a role='button' class='headerlink tooltipped tooltipped-ne' href="#quick-start" aria-label="Copy link to this section: Quick start"><svg xmlns="http://www.w3.org/2000/svg" pointer-events="none" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2>
<p>The code below illustrates how to quickly get started with an example problem.</p>
<div class="highlight">
<div class='code-header'>
<span class='code-lang'>python</span>
<button class='copy tooltipped tooltipped-nw' aria-label='Copy this code'><svg xmlns='http://www.w3.org/2000/xvg' viewBox='0 0 24 24' aria-hidden='true'><path d='M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z' /></svg></button>
</div>
<pre><code><span class="kn">from</span> <span class="nn">problems</span> <span class="kn">import</span> <span class="n">MMcProblem</span>
<span class="kn">from</span> <span class="nn">simulator</span> <span class="kn">import</span> <span class="n">Simulator</span><span class="p">,</span> <span class="n">Reporter</span>
<span class="kn">from</span> <span class="nn">planners</span> <span class="kn">import</span> <span class="n">GreedyPlanner</span>

<span class="n">problem_instances</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">):</span>
    <span class="n">problem_instances</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">MMcProblem</span><span class="p">()</span><span class="o">.</span><span class="n">from_generator</span><span class="p">(</span><span class="mi">51000</span><span class="p">))</span>
<span class="n">planner</span> <span class="o">=</span> <span class="n">GreedyPlanner</span><span class="p">()</span>
<span class="n">reporter</span> <span class="o">=</span> <span class="n">Reporter</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">Simulator</span><span class="o">.</span><span class="n">replicate</span><span class="p">(</span><span class="n">problem_instances</span><span class="p">,</span> <span class="n">planner</span><span class="p">,</span> <span class="n">reporter</span><span class="p">,</span> <span class="mi">50000</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Reporter</span><span class="o">.</span><span class="n">aggregate</span><span class="p">(</span><span class="n">results</span><span class="p">))</span>
</code></pre></div>
<p>The example problem represents an M/M/c queue with an interarrival rate of 10 a service time of 9 and c=2 servers.
The specification of the problem can be inspected in the MMcProblem code.</p>
<p>First, problem instances must be created from the problem. This can automatically be done using the from_generator method, which
exists for each problem. The method takes the amount of simulation time for which instances should be generated as a parameter.
This amount of time should be slightly longer than the simulation time, so the simulator does not run out of cases to simulate.
Each instance consists of cases that arrive at a simulated time. Each case has one or more tasks that must be performed on it (in this case only one task).</p>
<p>Second, a planner should be created that plans the assignment of tasks to resources. A default greedy planner exists that
assigns each task to the first available resource.</p>
<p>Third, a reporter should be created that collects information from the simulator. A default reporter exists that collects
for each instance the number of cases that completed and the average cycle time per case as well as the number of
tasks that completed and the average processing time and waiting time per task. The reporter takes the warmup time as
a parameter, i.e. the simulation time during which no data is collected for reporting.</p>
<p>Now, the simulator can be run for the problem instances with the planner and the reporter. The simulator also takes an
amount of simulation time for which it should be run. The simulator returns a list of results. This is the information
that the reporter generates for each instance, i.e. the list has as many results as there are problem instances.</p>
<p>Finally, the list of results can be aggregated. Each reporter has an aggregate method that aggregated the results
over all problem instances into a single result. The default reporter calculates the averages and 95% confidence
intervals over all the reported statistics: the number of cases, etc.</p>
</section>
<section id="defining-a-problem">
<h2><a class="toc-backref" href="#id2">Defining a problem</a><a role='button' class='headerlink tooltipped tooltipped-ne' href="#defining-a-problem" aria-label="Copy link to this section: Defining a problem"><svg xmlns="http://www.w3.org/2000/svg" pointer-events="none" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2>
<p>A problem can be defined as an subclass of the abstract class <code class="xref py py-class docutils literal notranslate"><span class="pre">problems.Problem</span></code>.
By doing so it inherits methods for generating problem instances and loading and saving problem instances.</p>
<p>A problem must define:</p>
<ul class="simple">
<li><p>The resources that exist.</p></li>
<li><p>The interarrival time distribution of cases.</p></li>
<li><p>The types of tasks that can be performed for cases.</p></li>
<li><p>Rules for what the next task will be when a case first arrives or when a task is completed.</p></li>
<li><p>The processing time distribution for each task.</p></li>
<li><p>The data that is generated by a task.</p></li>
<li><p>For each task the list of resources that is authorized to perform the task.</p></li>
</ul>
<p>The resources and task types are static lists, typically of labels for resources and task types. For example,
we can define the M/M/c problem presented above with two resources and a single task type as follows.</p>
<div class="highlight">
<div class='code-header'>
<span class='code-lang'>python</span>
<button class='copy tooltipped tooltipped-nw' aria-label='Copy this code'><svg xmlns='http://www.w3.org/2000/xvg' viewBox='0 0 24 24' aria-hidden='true'><path d='M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z' /></svg></button>
</div>
<pre><code><span class="k">class</span> <span class="nc">MMcProblem</span><span class="p">(</span><span class="n">Problem</span><span class="p">):</span>
    <span class="n">resources</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;R1&quot;</span><span class="p">,</span> <span class="s2">&quot;R2&quot;</span><span class="p">]</span>
    <span class="n">task_types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;T&quot;</span><span class="p">]</span>
</code></pre></div>
<p>The other elements of the problem are implemented as methods that sample from a distribution. For example,
in case of the M/M/c problem, there is a method that samples the processing time from an exponential distribution
with a mean of 10. It must the sampled value. There are also methods that sample the next type of task that
must be performed. However, for an M/M/c queue this is quite simple, because it must always be T as the first
task type and no tasks after T is performed. However, it is also possible to simulate a queuing network, an MDP
or a business process model. In those cases the next task would vary.</p>
<p>More precisely, the remainder of the M/M/c problem can be defined as follows.</p>
<div class="highlight">
<div class='code-header'>
<span class='code-lang'>python</span>
<button class='copy tooltipped tooltipped-nw' aria-label='Copy this code'><svg xmlns='http://www.w3.org/2000/xvg' viewBox='0 0 24 24' aria-hidden='true'><path d='M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z' /></svg></button>
</div>
<pre><code><span class="k">def</span> <span class="nf">processing_time_sample</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resource</span><span class="p">,</span> <span class="n">task</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">random</span><span class="o">.</span><span class="n">expovariate</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">9</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">interarrival_time_sample</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">random</span><span class="o">.</span><span class="n">expovariate</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">10</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">sample_initial_task_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">&quot;T&quot;</span>

<span class="k">def</span> <span class="nf">next_task_types_sample</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[]</span>

<span class="k">def</span> <span class="nf">resource_pool</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task_type</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">resources</span>

<span class="k">def</span> <span class="nf">data_sample</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task_type</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">dict</span><span class="p">()</span>
</code></pre></div>
<p>This samples the processing time and the interarrival time from exponential distributions. It samples the initial
task type as T and the subsequent task types as empty, explained above. It specifies that it always returns
the list of all resources as the resources that are authorized to perform a task and it always returns an empty dictionary
as the data that is generated by a task, i.e. there is no data.</p>
</section>
<section id="defining-a-planner">
<h2><a class="toc-backref" href="#id3">Defining a planner</a><a role='button' class='headerlink tooltipped tooltipped-ne' href="#defining-a-planner" aria-label="Copy link to this section: Defining a planner"><svg xmlns="http://www.w3.org/2000/svg" pointer-events="none" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2>
<p>A planner can be defined as a subclass of the abstract class <code class="xref py py-class docutils literal notranslate"><span class="pre">planners.Planner</span></code>.
A planner is called each time a new task or a resource becomes available in the simulator.
It must then assign resources to tasks and return which resource to assign to which task.
To decide on the assignment, the planner has access to the current state of the cases that
are being simulated via the environment that is passed to it. Most importantly it has access to:</p>
<ul class="simple">
<li><p>assigned_tasks: The tasks that are currently assigned.</p></li>
<li><p>unassigned_tasks: The tasks that are currently not assigned.</p></li>
<li><p>available_resources: The set of resources that are currently available.</p></li>
<li><p>busy_resources: The resources that are currently busy.</p></li>
<li><p>reserved_resources: The resources that are currently reserved.</p></li>
<li><p>busy_cases: The cases of which a task is currently being performed.</p></li>
<li><p>now: The current simulation time.</p></li>
</ul>
<p>It can use all of this information to decide which resource to assign to which task.</p>
<p>The lifecycle of tasks and resources is important. Initially, all tasks are unassigned and all resources are
available. the list of busy cases identifies the cases and the next tasks to perform for those cases. When the planner
assigns a resource to a task, it also passes the time at which the resource must
start executing the task. The resource then becomes reserved and the task becomes assigned. At the moment the
resource starts executing the task, the resource becomes busy. When the resource is done executing the task,
the task is removed from both the list of assigned and the list of unassigned tasks and the resource becomes
available again. At that moment the task is also removed from the busy cases. The simulator then calculates the
next tasks that must be performed, which are added to the unassigned tasks and the busy cases.</p>
<div class="highlight">
<div class='code-header'>
<span class='code-lang'>python</span>
<button class='copy tooltipped tooltipped-nw' aria-label='Copy this code'><svg xmlns='http://www.w3.org/2000/xvg' viewBox='0 0 24 24' aria-hidden='true'><path d='M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z' /></svg></button>
</div>
<pre><code><span class="k">class</span> <span class="nc">GreedyPlanner</span><span class="p">(</span><span class="n">Planner</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">assign</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">environment</span><span class="p">):</span>
        <span class="n">assignments</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">available_resources</span> <span class="o">=</span> <span class="n">environment</span><span class="o">.</span><span class="n">available_resources</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">environment</span><span class="o">.</span><span class="n">unassigned_tasks</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">available_resources</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">resource</span> <span class="o">=</span> <span class="n">available_resources</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
                <span class="n">assignments</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">task</span><span class="p">,</span> <span class="n">resource</span><span class="p">,</span> <span class="n">environment</span><span class="o">.</span><span class="n">now</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">assignments</span>
</code></pre></div>
<p>This planner simply iterates over all unassigned tasks and assigns the first available resource to it.
It does this by adding a triple - task, resource, moment of assignment - to the list of assignments,
which is returned in the end.
Note that unassigned_tasks is a dictionary that maps a task identifier to a task.
This is the reason the function iterates over unassigned_tasks.values().</p>
</section>
<section id="defining-a-predicter">
<h2><a class="toc-backref" href="#id4">Defining a predicter</a><a role='button' class='headerlink tooltipped tooltipped-ne' href="#defining-a-predicter" aria-label="Copy link to this section: Defining a predicter"><svg xmlns="http://www.w3.org/2000/svg" pointer-events="none" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2>
<p>A predicter can be defined as a subclass of the abstract class <code class="xref py py-class docutils literal notranslate"><span class="pre">predicters.Predicter</span></code>.
It can be passed to a planner to use the prediction when making a plan.
A predicter can implement methods for calculating:</p>
<ul class="simple">
<li><p>the time a resource will take to perform a particular task.</p></li>
<li><p>the remaining time a resource will still take to perform a task to which it is assigned.</p></li>
<li><p>the next task that will arrive.</p></li>
</ul>
<p>For example, let’s create a new variant of the M/M/c problem in which each task is about one
of two kinds of applications (uniformly distributed) and resource R1 is better at processing one
kind of application, while resource R2 is better at processing the other. Specifically,
resources take 9 minutes (exponentially distributed) on the applications they are good at, while
they take 27 minutes (exponentially distributed) on the applications that they are not good at.</p>
<p>The code below shows how the original M/M/c problem can be adapted to represent that kind of
behavior. Most importantly, each task now has a data element optimal_resource that identifies the
resource that is good at the task.</p>
<div class="highlight">
<div class='code-header'>
<span class='code-lang'>python</span>
<button class='copy tooltipped tooltipped-nw' aria-label='Copy this code'><svg xmlns='http://www.w3.org/2000/xvg' viewBox='0 0 24 24' aria-hidden='true'><path d='M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z' /></svg></button>
</div>
<pre><code><span class="k">class</span> <span class="nc">ImbalancedProblem</span><span class="p">(</span><span class="n">Problem</span><span class="p">):</span>

    <span class="o">...</span>

    <span class="k">def</span> <span class="nf">processing_time_sample</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resource</span><span class="p">,</span> <span class="n">task</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">resource</span> <span class="o">==</span> <span class="n">task</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;optimal_resource&quot;</span><span class="p">]:</span>
            <span class="k">return</span> <span class="n">random</span><span class="o">.</span><span class="n">expovariate</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">9</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">random</span><span class="o">.</span><span class="n">expovariate</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">27</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">data_sample</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task_type</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;optimal_resource&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s2">&quot;R1&quot;</span><span class="p">,</span> <span class="s2">&quot;R2&quot;</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">data</span>
</code></pre></div>
<p>Accordingly, we can create a predicter that predicts the processing time and the remaining processing
time of a task, simply as the average processing time of the resource processing the task as follows.</p>
<div class="highlight">
<div class='code-header'>
<span class='code-lang'>python</span>
<button class='copy tooltipped tooltipped-nw' aria-label='Copy this code'><svg xmlns='http://www.w3.org/2000/xvg' viewBox='0 0 24 24' aria-hidden='true'><path d='M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z' /></svg></button>
</div>
<pre><code><span class="k">class</span> <span class="nc">ImbalancedPredicter</span><span class="p">(</span><span class="n">Predicter</span><span class="p">):</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">predict_processing_time_task</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">resource</span><span class="p">,</span> <span class="n">task</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">resource</span> <span class="o">==</span> <span class="n">task</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;optimal_resource&quot;</span><span class="p">]:</span>
            <span class="k">return</span> <span class="mi">9</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">27</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">predict_remaining_processing_time</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">resource</span><span class="p">,</span> <span class="n">task</span><span class="p">,</span> <span class="n">start_time</span><span class="p">,</span> <span class="n">now</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">ImbalancedPredicter</span><span class="o">.</span><span class="n">predict_processing_time_task</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">resource</span><span class="p">,</span> <span class="n">task</span><span class="p">)</span>
</code></pre></div>
<p>Now we can create an alternative planner that does not try to assign a task to the first available resource,
but rather to the resource that is expected to complete the task fastest, based on the prediction.</p>
</section>
<section id="visualizing-the-results">
<h2><a class="toc-backref" href="#id5">Visualizing the results</a><a role='button' class='headerlink tooltipped tooltipped-ne' href="#visualizing-the-results" aria-label="Copy link to this section: Visualizing the results"><svg xmlns="http://www.w3.org/2000/svg" pointer-events="none" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2>
<p>There are some convenience functions for visualizing the results of a simulation.
These are specifically created to work well with the reporters.</p>
<p>The default reporter generates a dictionary with the performance indicators as keys and
lists as values, where each element is the result of the performance indicator for a replication.
For example, if you do 3 replications, the code below could print something like <code class="code docutils literal notranslate"><span class="pre">[3987,</span> <span class="pre">4010,</span> <span class="pre">3996]</span></code>.</p>
<div class="highlight">
<div class='code-header'>
<span class='code-lang'>python</span>
<button class='copy tooltipped tooltipped-nw' aria-label='Copy this code'><svg xmlns='http://www.w3.org/2000/xvg' viewBox='0 0 24 24' aria-hidden='true'><path d='M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z' /></svg></button>
</div>
<pre><code><span class="o">...</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">Simulator</span><span class="o">.</span><span class="n">replicate</span><span class="p">(</span><span class="n">problem_instances</span><span class="p">,</span> <span class="n">planner</span><span class="p">,</span> <span class="n">reporter</span><span class="p">,</span> <span class="mi">50000</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="p">[</span><span class="s2">&quot;cases completed&quot;</span><span class="p">])</span>
</code></pre></div>
<p>We can pass this on to the boxplot visualizer, which takes a dictionary, where the keys are the labels of
the boxplots and the values are the lists on the basis of which each boxplot is generated.
For example, we can generate a boxplot for the code above as follows:</p>
<div class="highlight">
<div class='code-header'>
<span class='code-lang'>python</span>
<button class='copy tooltipped tooltipped-nw' aria-label='Copy this code'><svg xmlns='http://www.w3.org/2000/xvg' viewBox='0 0 24 24' aria-hidden='true'><path d='M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z' /></svg></button>
</div>
<pre><code><span class="n">visualizers</span><span class="o">.</span><span class="n">boxplot</span><span class="p">({</span><span class="s1">&#39;my boxplot title&#39;</span><span class="p">:</span> <span class="n">results</span><span class="p">[</span><span class="s2">&quot;cases completed&quot;</span><span class="p">]})</span>
</code></pre></div>
<p>The default reporter’s aggregator aggregates the individual values into a pair of an average and a 95% confidence interval.
We can pass this on the lineplot visualizer, which visualizes it as a line of averages, with lines
representing the 95% confidence intervals above and below that line.</p>
<p>For example, suppose we have created problems for processing times of 4 to 9 minutes,
we can simulate and create a lineplot visualization for those problems as follows:</p>
<div class="highlight">
<div class='code-header'>
<span class='code-lang'>python</span>
<button class='copy tooltipped tooltipped-nw' aria-label='Copy this code'><svg xmlns='http://www.w3.org/2000/xvg' viewBox='0 0 24 24' aria-hidden='true'><path d='M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z' /></svg></button>
</div>
<pre><code><span class="n">cases_completed_for_processing_time</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
<span class="k">for</span> <span class="n">processing_time</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">10</span><span class="p">):</span>
    <span class="o">...</span> <span class="c1"># create problem_instances for that processing_time</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">Simulator</span><span class="o">.</span><span class="n">replicate</span><span class="p">(</span><span class="n">problem_instances</span><span class="p">,</span> <span class="n">planner</span><span class="p">,</span> <span class="n">reporter</span><span class="p">,</span> <span class="mi">50000</span><span class="p">)</span>
    <span class="n">aggregated_results</span> <span class="o">=</span> <span class="n">Reporter</span><span class="o">.</span><span class="n">aggregate</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
    <span class="n">cases_completed_for_processing_time</span><span class="p">[</span><span class="n">processing_time</span><span class="p">]</span> <span class="o">=</span> <span class="n">aggregated_results</span><span class="p">[</span><span class="s2">&quot;cases completed&quot;</span><span class="p">]</span>

<span class="n">line_with_ci</span><span class="p">(</span><span class="n">cases_completed_for_processing_time</span><span class="p">)</span>
</code></pre></div>
</section>
</section>


        </article>

        <footer>
          
            <div class="mt-20 mb-4 text-sm text-gray-700">Made with <a href="https://www.sphinx-doc.org">Sphinx 4.0.2</a></div>
          
        </footer>
      </main>

      <div class="sticky bottom-0 md:hidden print:hidden bg-white">
  <div class="flex justify-center items-center">
    <button
      id="openSidebar"
      aria-labelledby="menuLabel"
      class="text-3xl p-4 flex items-center focus:bg-gray-200">
      <svg aria-hidden="true" class="fill-current h-8 w-8" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>
      <span id="menuLabel" class="pl-2 text-sm font-medium uppercase tracking-wide text-gray-700">Menu</span>
    </button><button
      id="openSearch"
      aria-labelledby="searchLabel"
      class="text-3xl p-4 flex items-center focus:bg-gray-200">
      <svg aria-hidden="true" class="fill-current h-8 w-8" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
      <span id="searchLabel" class="pl-2 text-sm font-medium uppercase tracking-wide text-gray-700">Search</span>
    </button>
  </div>
</div>
      <div
  id="search-pane"
  class="w-full fixed bottom-0 left-0 z-10 bg-gray-900 overflow-x-hidden pt-10 flex flex-col items-center md:hidden transition-all opacity-0 transform transform-gpu translate-y-full duration-300"
>
<h4 id="search-label" class="text-xl text-white mb-4">Enter search term</h4><form
    id="searchbox" action="search.html" method="get"
    class="flex w-full justify-between items-center max-w-sm px-12">

    <input
      name="q"
      aria-labelledby="search-label"
      type="search"
      placeholder="Search the docs"
      class="p-2 flex-1 rounded-none"
    />
    
<button class="p-2 text-white bg-gray-700 hover:bg-gray-200 hover:text-pink-500 focus:bg-gray-200 focus:text-pink-500 tooltipped tooltipped-sw"
        aria-label="Get search results">
  <svg aria-hidden="true" class="fill-current stroke-current h-6 w-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
</button>

  </form>

  
<button
    id="closeSearch"
    aria-label="Close menu"
    title="Close menu"
    class="text-4xl text-gray-200 p-4 bottom-0 hover:text-pink-500 md:hidden focus:text-pink-500 self-center">
  <svg aria-hidden="true" class="fill-current stroke-current h-6 w-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
</button>

</div>
      <button
  id="snackbar"
  class="fixed bottom-0 right-0 opacity-0 p-4 m-4 tracking-wide bg-gray-900 text-gray-100 transition transform transform-gpu duration-500 translate-y-full"
>
  Clear highlights
</button><div id="screen" class="fixed hidden inset-0 bg-black bg-opacity-50"></div>
    </div>
    
      
<script id="documentation_options"
        data-url_root="./"
        src="_static/documentation_options.js">
</script>
<script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
<script src="_static/jquery.js"></script>
<script src="_static/underscore.js"></script>
<script src="_static/doctools.js"></script>
<script src="_static/theme.js" defer></script>
    
  </body>
</html>